language: cpp

compiler:
  - clang
  - gcc

before_install:
  - sudo apt-add-repository -y ppa:jkeiren/ppa
  - if test $CC = gcc; then sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test; fi
  - sudo add-apt-repository -y ppa:kalakris/cmake # CMake 2.11.2
  - sudo apt-add-repository -y ppa:ubuntu-sdk-team/ppa
  - sudo apt-add-repository -y ppa:beineri/opt-qt521
  - sudo apt-get update -qq
  - sudo apt-get -qq install python3 python3-dev
  - sudo update-alternatives --install /usr/bin/python python /usr/bin/python3 10
  - sudo apt-get -qq install cmake
  - sudo apt-get -qq install freeglut3-dev
  - sudo apt-get -qq install libcurl4-openssl-dev
  - sudo apt-get -qq install qt52base qt52tools
  - sudo apt-get -qq install libxmu-dev libxi-dev
  - if test $CC = gcc; then sudo apt-get install -qq gcc-4.8 g++-4.8; fi
  - if test $CC = gcc; then sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 20; fi
  - if test $CC = gcc; then sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 20; fi
  - if test $CC = gcc; then sudo update-alternatives --config gcc; fi
  - if test $CC = gcc; then sudo update-alternatives --config g++; fi
  - source /opt/qt52/bin/qt52-env.sh
  - mkdir -p sip-build && cd sip-build
  - wget http://sourceforge.net/projects/pyqt/files/sip/sip-4.15.5/sip-4.15.5.tar.gz
  - tar -xvzf sip-4.15.5.tar.gz
  - cd sip-4.15.5
  - python configure.py
  - make -j4
  - sudo make install
  - cd ../..
  - mkdir -p pyqt5-build && cd pyqt5-build
  - wget http://sourceforge.net/projects/pyqt/files/PyQt5/PyQt-5.2.1/PyQt-gpl-5.2.1.tar.gz
  - tar -xvzf PyQt-gpl-5.2.1.tar.gz
  - cd PyQt-gpl-5.2.1
  - python configure.py --confirm-license
  - make -j4
  - sudo make install
  - cd ../..
  - export PYTHONPATH=/usr/lib/python3.2/site-packages:$PYTHONPATH

before_script:
  - mkdir build
  - cd build
  - cmake -DCMAKE_BUILD_TYPE=Release ..

script:
    - make -j1
